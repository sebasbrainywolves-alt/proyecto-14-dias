<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Proyecto 14 Días – Proceso C</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    background:#0f172a;
    color:#f8fafc;
    font-family: Inter, system-ui, sans-serif;
}
.glass {
    background:#1e293b;
    border:1px solid #334155;
    border-radius:20px;
}
.task.done { opacity:.45; text-decoration:line-through; }
button:disabled { opacity:.4; cursor:not-allowed; }
</style>
</head>

<body class="p-4 max-w-3xl mx-auto">

<h1 class="text-3xl font-black italic mb-1">PROYECTO <span class="text-sky-400">14 DÍAS</span></h1>
<p id="date" class="text-xs text-slate-400 mb-6"></p>

<div class="glass p-4 mb-6">
<canvas id="radar"></canvas>
</div>

<div class="glass p-4 mb-6">
<h2 id="dayTitle" class="text-xl font-black italic mb-2"></h2>
<p id="blockLabel" class="text-xs uppercase tracking-widest mb-4"></p>

<div id="tasks" class="space-y-2 mb-4"></div>

<div class="h-2 bg-slate-900 rounded overflow-hidden mb-4">
<div id="progress" class="h-full bg-sky-500" style="width:0%"></div>
</div>

<button id="closeDay" onclick="cerrarDia()" disabled
class="w-full py-3 rounded bg-emerald-500 text-black font-black">
Cerrar día
</button>
</div>

<div class="glass p-4">
<textarea id="logInput" rows="2"
class="w-full bg-slate-900 p-3 rounded text-sm"
placeholder="Qué se hizo hoy…"></textarea>
<button onclick="guardarBitacora()"
class="mt-2 text-xs uppercase tracking-widest text-sky-400">
Guardar nota
</button>
<div id="log" class="mt-3 space-y-2 text-xs"></div>
</div>

<script>
/* ---------------- PLAN ---------------- */

const plan = [
{day:1,block:"Estabilidad",radar:[30,10,20],tasks:[
{t:"Registro civil Sebastián",d:"Documento sucesión",done:false},
{t:"Carpeta digital",d:"Orden legal",done:false},
{t:"Foto: luz entrando",d:"Calma",done:false}
]},
{day:2,block:"Estabilidad",radar:[40,15,25],tasks:[
{t:"Registro civil Ana María",d:"Documento sucesión",done:false},
{t:"Comprar estuco/lijas",d:"Casa Cota",done:false},
{t:"Foto: texturas",d:"Observación",done:false}
]},
{day:3,block:"Estabilidad",radar:[50,20,30],tasks:[
{t:"Escanear documentos",d:"Legal",done:false},
{t:"Correo seguimiento",d:"Gestión",done:false},
{t:"Dibujo libre",d:"Descarga",done:false}
]},
{day:4,block:"Estabilidad",radar:[60,25,35],tasks:[
{t:"Resanar zona",d:"Casa",done:false},
{t:"Comprar silicona",d:"Casa",done:false},
{t:"Foto: antes",d:"Registro",done:false}
]},
{day:5,block:"Estabilidad",radar:[70,30,40],tasks:[
{t:"Coordinar vidrio",d:"Casa",done:false},
{t:"Ordenar materiales",d:"Orden",done:false},
{t:"Dibujo objetos",d:"Presencia",done:false}
]},
{day:6,block:"Flujo",radar:[50,40,30],tasks:[
{t:"Sellar humedad",d:"Una zona",done:false},
{t:"Llamada corta",d:"Gestión",done:false},
{t:"Foto: manos",d:"Acción",done:false}
]},
{day:7,block:"Flujo",radar:[50,50,35],tasks:[
{t:"Pintar pared",d:"Avance",done:false},
{t:"Limpieza ligera",d:"Orden",done:false},
{t:"Foto: proceso",d:"Registro",done:false}
]},
{day:8,block:"Flujo",radar:[50,60,40],tasks:[
{t:"Pintar otra pared",d:"Ritmo",done:false},
{t:"Revisar respuestas",d:"Legal",done:false},
{t:"Dibujo libre",d:"Descanso",done:false}
]},
{day:9,block:"Flujo",radar:[50,70,50],tasks:[
{t:"Limpieza parcial",d:"Preparar",done:false},
{t:"Fotos avance",d:"Registro",done:false},
{t:"Foto: después",d:"Logro",done:false}
]},
{day:10,block:"Sentido",radar:[40,60,60],tasks:[
{t:"Texto arriendo",d:"Ingreso",done:false},
{t:"Revisar precios",d:"Mercado",done:false},
{t:"Foto: espacios",d:"Potencial",done:false}
]},
{day:11,block:"Sentido",radar:[40,60,70],tasks:[
{t:"Publicar arriendo",d:"Acción",done:false},
{t:"Responder mensajes",d:"Gestión",done:false},
{t:"Dibujo",d:"Expresión",done:false}
]},
{day:12,block:"Sentido",radar:[40,60,80],tasks:[
{t:"Contactar abogado",d:"Sucesión",done:false},
{t:"Anotar respuestas",d:"Bitácora",done:false},
{t:"Foto: caminos",d:"Metáfora",done:false}
]},
{day:13,block:"Sentido",radar:[40,60,90],tasks:[
{t:"Segundo abogado",d:"Comparar",done:false},
{t:"Evaluar opciones",d:"Sin decidir",done:false},
{t:"Dibujo",d:"Calma",done:false}
]},
{day:14,block:"Sentido",radar:[50,70,100],tasks:[
{t:"Revisión general",d:"Cierre",done:false},
{t:"Ajustar lista",d:"Continuidad",done:false},
{t:"Foto cierre",d:"Fin ciclo",done:false}
]}
];

/* ------------- ESTADO + STORAGE ------------- */

let state = JSON.parse(localStorage.getItem("p14_state")) || {
day:1,
completed:[]
};

function save() {
localStorage.setItem("p14_state", JSON.stringify({state,plan}));
}

/* ------------- UI ------------- */

const radar = new Chart(document.getElementById("radar"), {
type:"radar",
data:{
labels:["Estabilidad","Flujo","Sentido"],
datasets:[{data:[10,10,10],backgroundColor:"rgba(56,189,248,.3)",borderColor:"#38bdf8"}]
},
options:{plugins:{legend:{display:false}},scales:{r:{min:0,max:100}}}
});

function render() {
const d = plan[state.day-1];
document.getElementById("dayTitle").innerText = "Día " + d.day;
document.getElementById("blockLabel").innerText = d.block;

const tasks = document.getElementById("tasks");
tasks.innerHTML = "";

let done = 0;
d.tasks.forEach((t,i)=>{
if(t.done) done++;
const div = document.createElement("div");
div.className="task p-2 rounded border border-slate-700 "+(t.done?"done":"");
div.innerHTML = `<strong>${t.t}</strong><br><span class="text-xs">${t.d}</span>`;
div.onclick=()=>{t.done=!t.done;save();render();};
tasks.appendChild(div);
});

document.getElementById("progress").style.width = (done/3*100)+"%";
document.getElementById("closeDay").disabled = done<3;

radar.data.datasets[0].data = d.radar;
radar.update();
}

function cerrarDia() {
if(!state.completed.includes(state.day)) state.completed.push(state.day);
if(state.day<14) state.day++;
save(); render();
}

function guardarBitacora(){
const input=document.getElementById("logInput");
if(!input.value) return;
const div=document.createElement("div");
div.innerText="Día "+state.day+": "+input.value;
document.getElementById("log").prepend(div);
input.value="";
}

document.getElementById("date").innerText =
new Date().toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"});

render();
</script>

</body>
</html>
